!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.CookieControl=t():e.CookieControl=t()}(window,function(){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setCookie=function(e,t,n){var o=new Date;o.setTime(o.getTime()+24*n*60*60*1e3);var i="expires="+o.toUTCString();document.cookie=e+"="+t+";"+i+";path=/"},t.getCookie=function(e){for(var t=e+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){for(var i=n[o];" "===i.charAt(0);)i=i.substring(1);if(0===i.indexOf(t))return i.substring(t.length,i.length)}return""}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),c=n(0);var r=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{optionalCookies:[]},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ng-cc";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.el=document.getElementById(i),this.options=Object.assign({},{open:!0,lifetime:365,acceptValue:"1",revokeValue:"0",timeout:200},n.options),this.opened=!1,this.acceptedCookies="accepted"===(0,c.getCookie)("ng-cc-accepted"),this.optionalCookies={},this.optionalCookiesByName=[],n.optionalCookies.forEach(function(e){var n=(0,c.getCookie)(e.cookieName||"ng-cc-"+e.name),i=o({},e,{accepted:n!==t.options.revokeValue&&(n===t.options.acceptValue||e.accepted)});t.optionalCookies[i.name]=i,t.optionalCookiesByName.push(i.name),i.accepted?i.onAccept&&i.onAccept():i.onRevoke&&i.onRevoke()})}return i(e,[{key:"init",value:function(){this.el&&(this.renderOptional(),this.setupEvents(),!this.acceptedCookies&&this.options.open&&window.setTimeout(this.open.bind(this),this.options.timeout))}},{key:"setupEvents",value:function(){var e=this;document.querySelectorAll(".ng-cc-toggle").forEach(function(t){t.addEventListener("click",function(t){return t.preventDefault(),e.opened?e.close():e.open()})}),document.querySelectorAll(".ng-cc-close").forEach(function(t){t.addEventListener("click",e.close.bind(e))}),document.querySelectorAll(".js-open-ng-cc").forEach(function(t){t.addEventListener("click",e.open.bind(e))}),this.el.querySelector("#ng-cc-accept").addEventListener("click",this.accept.bind(this)),this.el.querySelectorAll(".ng-cc-optional-checkbox").forEach(function(t){t.addEventListener("change",e.toggleCookie.bind(e))})}},{key:"open",value:function(e){e&&e.preventDefault(),this.el.setAttribute("open",""),this.opened=!0}},{key:"close",value:function(e){e&&e.preventDefault(),this.el.removeAttribute("open"),this.opened=!1}},{key:"renderOptional",value:function(){var e=this,t="";this.optionalCookiesByName.forEach(function(n){var o=e.optionalCookies[n];t+='<li>\n          <input type="checkbox" class="ng-cc-optional-checkbox" id="ng-cc-'+o.name+'" data-name="'+o.name+'" '+(o.accepted?"checked":"")+' />\n          <label for="ng-cc-'+o.name+'">\n            <i class="ng-cc-checkbox-icon">\n              <span class="ng-cc-on">On</span>\n              <span class="ng-cc-off">Off</span>\n            </i>'+o.label+"\n          </label>\n          <p>"+o.description+"</p>\n        </li>"}),this.el.querySelector(".ng-cc-optional-list").innerHTML+=t}},{key:"toggleCookie",value:function(e){this.optionalCookies[e.target.dataset.name].accepted=e.target.checked,(0,c.setCookie)(this.optionalCookies[e.target.dataset.name].cookieName||"ng-cc-"+e.target.dataset.name,e.target.checked?this.options.acceptValue:this.options.revokeValue,this.options.lifetime)}},{key:"accept",value:function(e){e&&e.preventDefault(),(0,c.setCookie)("ng-cc-accepted","accepted",this.options.lifetime),this.close()}}]),e}();t.default=r}])});